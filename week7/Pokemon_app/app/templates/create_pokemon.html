{% extends 'base.html' %}

{% block content %}
<form id="pokemon-form">
    <label>Name:</label>
    <input type="text" id="name" required><br>

    <label>Height:</label>
    <input type="number" id="height" required><br>

    <label>Weight:</label>
    <input type="number" id="weight" required><br>

    <label>XP:</label>
    <input type="number" id="xp" required><br>

    <label>Image URL:</label>
    <input type="url" id="image_url" required><br>

    <label>Pokemon URL:</label>
    <input type="url" id="pokemon_url" required><br>

    <label>Abilities (format: name:is_hidden, e.g., overgrow:false):</label>
    <input type="text" id="abilities" placeholder="e.g., overgrow:false,chlorophyll:true"><br>

    <label>Stats (format: name:base_stat, e.g., hp:45,attack:49):</label>
    <input type="text" id="stats" placeholder="e.g., hp:45,attack:49"><br>

    <label>Types (comma-separated):</label>
        <input type="text" id="types" placeholder="e.g., grass, poison"><br>

    <button type="button" onclick="submitForm()">Create Pokémon</button>
</form>


<script>
    function submitForm() {
        console.log("Button clicked!");  // Debug line

        const data = {
            name: document.getElementById("name").value,
            height: parseInt(document.getElementById("height").value),
            weight: parseInt(document.getElementById("weight").value),
            xp: parseInt(document.getElementById("xp").value),
            image_url: document.getElementById("image_url").value,
            pokemon_url: document.getElementById("pokemon_url").value,
            abilities: [],
            stats: [],
            types: []
        };

        console.log("Form Data:", data);

        fetch("/create/", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(data)
        })
        .then(response => response.json())
        .then(result => {
            alert("Pokémon created successfully!");
            console.log(result);
        })
        .catch(error => {
            console.error("Error in fetch:", error);
            alert("Failed to create Pokémon.");
        });
    }
</script>

{% endblock content %}